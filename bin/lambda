#!/bin/bash

route=/home/omarsaldanna/Lambda

case $1 in

	run)
		echo Running Lambda λ
		tmux new-session -d -s lambda "cd $route && python3 lambda/app.py"
		tmux new-session -d -s discordo "cd $route && python3 discordo/app.py"
		tmux ls
	;;

	kill)
		echo Killing Lambda λ
		tmux kill-session -t lambda
		tmux kill-session -t discordo
	;;

	update)
		echo Updating Lambda λ
		tmux new-session -d -s update "git fetch && git merge origin/main"
	;;

	reboot)
		echo Rebooting Lambda λ
		tmux kill-session -t lambda
                tmux kill-session -t discordo
		sleep 15
		echo Restarting Lambda λ
		tmux new-session -d -s lambda "cd $route && python3 lambda/app.py"
                tmux new-session -d -s discordo "cd $route && python3 discordo/app.py"
                tmux ls
	;;

	*)
		echo Unknown Command:
		echo lambda "[run|kill|update|reboot]"
	;;
esac
